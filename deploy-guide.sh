#!/bin/bash

# ğŸš€ Voice Changer å…è´¹éƒ¨ç½²å‘å¯¼

echo "=========================================="
echo "  Voice Changer å…è´¹éƒ¨ç½²æ–¹æ¡ˆé€‰æ‹©"
echo "=========================================="
echo ""
echo "é€‰æ‹©ä½ çš„éƒ¨ç½²æ–¹æ¡ˆï¼š"
echo ""
echo "1ï¸âƒ£  Vercel + Renderï¼ˆæ¨èï¼Œ5åˆ†é’Ÿä¸Šçº¿ï¼‰"
echo "2ï¸âƒ£  Oracle Cloudï¼ˆæ°¸ä¹…å…è´¹ï¼Œ30åˆ†é’Ÿï¼‰"
echo "3ï¸âƒ£  æœ¬åœ° + Cloudflare Tunnelï¼ˆ2åˆ†é’Ÿï¼‰"
echo "4ï¸âƒ£  Docker æœ¬åœ°è¿è¡Œ"
echo "5ï¸âƒ£  æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£"
echo ""
read -p "è¯·é€‰æ‹© (1-5): " choice

case $choice in
    1)
        echo ""
        echo "ğŸ“Œ Vercel + Render éƒ¨ç½²æ­¥éª¤ï¼š"
        echo ""
        echo "ã€ç¬¬1æ­¥ã€‘ä¸Šä¼ åˆ° GitHub"
        echo "  git add ."
        echo "  git commit -m 'Deploy to Vercel + Render'"
        echo "  git push origin main"
        echo ""
        echo "ã€ç¬¬2æ­¥ã€‘å‰ç«¯éƒ¨ç½²åˆ° Vercel"
        echo "  1. è®¿é—® https://vercel.com"
        echo "  2. ç”¨ GitHub è´¦å·ç™»å½•"
        echo "  3. New Project > é€‰æ‹©ä½ çš„ä»“åº“"
        echo "  4. Framework: Other"
        echo "  5. Build Command: cd frontend && npm run build"
        echo "  6. Output Directory: frontend/dist"
        echo "  7. ç‚¹å‡» Deploy"
        echo ""
        echo "ã€ç¬¬3æ­¥ã€‘åç«¯éƒ¨ç½²åˆ° Render"
        echo "  1. è®¿é—® https://render.com"
        echo "  2. ç‚¹å‡» New > Web Service"
        echo "  3. è¿æ¥ä½ çš„ GitHub ä»“åº“"
        echo "  4. Start Command:"
        echo "     gunicorn -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000 app.main:app"
        echo "  5. ç¯å¢ƒå˜é‡: PYTHONUNBUFFERED=1"
        echo "  6. Plan é€‰æ‹© Freeï¼Œç‚¹å‡» Create"
        echo ""
        echo "ã€ç¬¬4æ­¥ã€‘é…ç½®ç¯ä¿å˜é‡"
        echo "  åœ¨ Vercel ç¯å¢ƒå˜é‡ä¸­æ·»åŠ :"
        echo "  VITE_API_BASE_URL=https://your-render-app.onrender.com"
        echo ""
        echo "âœ… å®Œæˆï¼5 åˆ†é’Ÿåè®¿é—®ä½ çš„ Vercel URL"
        echo ""
        ;;
    2)
        echo ""
        echo "ğŸ“Œ Oracle Cloud å…è´¹éƒ¨ç½²æ­¥éª¤ï¼š"
        echo ""
        echo "ã€ç¬¬1æ­¥ã€‘æ³¨å†Œ Oracle Cloud"
        echo "  è®¿é—®: https://www.oracle.com/cloud/free/"
        echo "  éœ€è¦ä¿¡ç”¨å¡éªŒè¯ï¼ˆä¸ä¼šæ‰£è´¹ï¼‰"
        echo ""
        echo "ã€ç¬¬2æ­¥ã€‘åˆ›å»ºè™šæ‹Ÿæœº"
        echo "  - Region: é€‰æ‹©ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸ"
        echo "  - Image: Ubuntu 22.04"
        echo "  - Shape: Ampere A1ï¼ˆæ°¸ä¹…å…è´¹ï¼‰"
        echo "  - Public IP: å‹¾é€‰"
        echo ""
        echo "ã€ç¬¬3æ­¥ã€‘SSH è¿æ¥"
        echo "  ssh ubuntu@your-oracle-ip -i ~/your-key.key"
        echo ""
        echo "ã€ç¬¬4æ­¥ã€‘å®‰è£… Docker å’Œéƒ¨ç½²"
        echo "  curl -fsSL https://get.docker.com | sh"
        echo "  sudo usermod -aG docker ubuntu"
        echo "  git clone https://github.com/your-username/voice-changer.git"
        echo "  cd voice-changer && docker-compose up -d"
        echo ""
        echo "ã€ç¬¬5æ­¥ã€‘é…ç½®é˜²ç«å¢™"
        echo "  Oracle Cloud Console > VNIC > å®‰å…¨åˆ—è¡¨"
        echo "  æ·»åŠ  Ingress Rule: TCP 8000, 80, 443"
        echo ""
        echo "âœ… å®Œæˆï¼è®¿é—® http://your-oracle-ip:8000"
        echo ""
        ;;
    3)
        echo ""
        echo "ğŸ“Œ æœ¬åœ° + Cloudflare Tunnel éƒ¨ç½²æ­¥éª¤ï¼š"
        echo ""
        echo "ã€ç¬¬1æ­¥ã€‘å®‰è£… Cloudflare"
        echo "  macOS: brew install cloudflare/cloudflare-go/cloudflared"
        echo "  Linux: wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64"
        echo ""
        echo "ã€ç¬¬2æ­¥ã€‘å¯åŠ¨åç«¯"
        echo "  cd /Users/noizer/voice-changer"
        echo "  uvicorn app.main:app --port 8000"
        echo ""
        echo "ã€ç¬¬3æ­¥ã€‘åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨éš§é“"
        echo "  cloudflared tunnel --url http://localhost:8000"
        echo ""
        echo "ã€ç¬¬4æ­¥ã€‘è®°ä¸‹ç”Ÿæˆçš„ URL"
        echo "  ç±»ä¼¼: https://abc123.trycloudflare.com"
        echo ""
        echo "ã€ç¬¬5æ­¥ã€‘å¯åŠ¨å‰ç«¯"
        echo "  cd frontend"
        echo "  VITE_API_BASE_URL=https://abc123.trycloudflare.com npm run dev"
        echo ""
        echo "âœ… å®Œæˆï¼åˆ«äººå¯ä»¥é€šè¿‡ç”Ÿæˆçš„ URL è®¿é—®"
        echo ""
        ;;
    4)
        echo ""
        echo "ğŸ“Œ Docker æœ¬åœ°è¿è¡Œï¼š"
        echo ""
        echo "cd /Users/noizer/voice-changer"
        echo "./deploy.sh"
        echo ""
        echo "ç„¶åè®¿é—® http://localhost:8000"
        echo ""
        ;;
    5)
        echo ""
        echo "ğŸ“– æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£..."
        echo ""
        echo "ã€å®Œæ•´å…è´¹éƒ¨ç½²æŒ‡å—ã€‘"
        echo "  cat /Users/noizer/voice-changer/FREE_DEPLOYMENT.md"
        echo ""
        echo "ã€éƒ¨ç½²å¸¸è§é—®é¢˜ã€‘"
        echo "  cat /Users/noizer/voice-changer/DEPLOYMENT.md"
        echo ""
        ;;
    *)
        echo "âŒ æ— æ•ˆçš„é€‰æ‹©"
        exit 1
        ;;
esac

echo ""
echo "ğŸ’¡ éœ€è¦å¸®åŠ©ï¼ŸæŸ¥çœ‹å®Œæ•´æ–‡æ¡£ï¼š"
echo "   FREE_DEPLOYMENT.md  - å…è´¹éƒ¨ç½²æ–¹æ¡ˆ"
echo "   DEPLOYMENT.md       - æ‰€æœ‰éƒ¨ç½²æ–¹æ¡ˆ"
